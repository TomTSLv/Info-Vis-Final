<!DOCTYPE html>
<html>
<head>
	<title>Siyao Fang & Tianshu Lyu Final Project</title>
	<script src="https://d3js.org/d3.v3.min.js"></script>
</head>
<body>
	<script type="text/javascript">
		var width = 960;
		var height = 500;

		var testCenters = new Array();

		var projection = d3.geo.albersUsa()
								.translate([width/2, height/2])
								.scale([1000]);

		var path = d3.geo.path()
						.projection(projection);

		var svg = d3.select("body")
					.append("svg")
					.attr("width",width)
					.attr("height", height);

		var json = d3.json("us-states.json",function(json){
			svg.selectAll("path")
				.data(json.features)
				.enter()
				.append("path")
				.attr("d", path)
				.style("stroke", "#000000")
				.style("stroke-wdith", "1")	
				.style("fill","fff");

				loadTestCenter();

		});

		function loadTestCenter(){
			var pointData = d3.csv("../Data/ACT_AllPointsFile.csv",function(error, data){
				data.forEach(function(d){
					if (d.POINTTYPE==="TESTCENTER"){
						testCenters.push(d);
					}
				})
				addPoints(testCenters);
			});
		}

		function addPoints(testCenters){
			svg.selectAll("circle")
				.data(testCenters)
				.enter()
				.append("circle")
				.attr("cx",function(d){
					return projection([d.LONGITUDE, d.LATITUDE])[0];
				})
				.attr("cy", function(d){
					return projection([d.LONGITUDE, d.LATITUDE])[1];
				})
				.attr("r","2")
				.style("fill", "red")
		}
	</script>
</html>
